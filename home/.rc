#!/bin/bash

#-(Source Files)--------------------------------------------------------------
__source__() {
	local hostname
	hostname=$(hostname)
	local file="$HOME/$hostname/$1"

	# Source common file only if second arg isn't set
	if [ "$#" -lt 2 ]; then
		# shellcheck source=/dev/null
		source "$HOME/$1" # Source common file first
	fi

	# Check if hostname-specific file exists
	if [[ -f "$file" ]]; then
		# shellcheck source=/dev/null
		source "$file"
	else
		echo "Unable to find priv files for $hostname.."
	fi
}

__source__ ".env"
__source__ ".alias"
__source__ ".rc" priv-only

#-(Create files/folders that don't exist but are required )-------------------

# Z script
Z_SH_PATH="$HOME/z.sh"
Z_SH_LINK="https://raw.githubusercontent.com/rupa/z/master/z.sh"
if ! [[ -r "$Z_SH_PATH" ]]; then
	wget "$Z_SH_LINK" -O "$Z_SH_PATH"
else
	# shellcheck source=/dev/null
	source "$Z_SH_PATH"
fi

# Create directories that don't exist
! [[ -d "$VENV_DIR" ]] && mkdir "$VENV_DIR"
! [[ -d "$CODE_DIR" ]] && mkdir "$CODE_DIR"
! [[ -d "$NOTES_DIR" ]] && mkdir "$NOTES_DIR"
! [[ -d "$STASH_DIR" ]] && mkdir "$STASH_DIR"

#-----------------------------------------------------------------------------

source $HOME/.functions
source $HOME/.completions
