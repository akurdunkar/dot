#!/bin/bash

MAX_ATTEMPTS=10

autorandr_get_current_layout() {
	autorandr "$@" | grep -i current | awk '{print $1}'
}

initial_layout=$(autorandr_get_current_layout)

for ((i = 1; i <= MAX_ATTEMPTS; i++)); do
	current_layout=$(autorandr_get_current_layout --change)
	if [[ "$current_layout" != "$initial_layout" ]]; then
		notify-send -u normal "Monitor Layout Changed" \
            "$initial_layout â†’ $current_layout" -i $HOME/assets/desktop_icon.png
		exit 0
	fi
	sleep 2
done
